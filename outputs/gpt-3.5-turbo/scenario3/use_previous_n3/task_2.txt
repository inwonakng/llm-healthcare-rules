@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix : <http://example.org/> .

# Rule 1: Medicare covers transplant drug therapy if it paid for your organ transplant.
{
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :paidForOrganTransplant ?organs.
} => {
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :coversTransplantDrugTherapy true.
}.

# Rule 2: You need to have Part A at the time of the covered transplant.
{
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :coversTransplantDrugTherapy true.
  ?coverage :mustHavePartA true.
} => {
  ?person :hasMedicareCoverage ?coverage.
}.

# Rule 3: You must have Part B at the time you receive immunosuppressive drugs.
{
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :coversTransplantDrugTherapy true.
  ?coverage :mustHavePartB true.
} => {
  ?person :hasMedicareCoverage ?coverage.
}.

# Rule 4: If Part B doesn't cover immunosuppressive drugs, Medicare's drug coverage (Part D) can be used.
{
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :coversTransplantDrugTherapy true.
  ?coverage :mustHavePartB false.
} => {
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :canUsePartD true.
}.

# Rule 5: If you have Original Medicare, you can join a Medicare drug plan for coverage.
{
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :coversTransplantDrugTherapy true.
  ?coverage :hasOriginalMedicare true.
} => {
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :canJoinMedicareDrugPlan true.
}.

# Rule 6: If you only have Medicare due to End-Stage Renal Disease (ESRD), your coverage, including immunosuppressive drug coverage, ends 36 months after a successful kidney transplant.
{
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :onlyDueToESRD true.
  ?coverage :coversTransplantDrugTherapy true.
  ?coverage :endsAfter36Months true.
} => {
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :includesImmunosuppressiveDrugCoverage false.
}.

# Rule 7: Medicare provides a benefit for individuals who lose Part A coverage 36 months after a kidney transplant and don't have certain types of other health coverage.
{
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :losesPartACoverage true.
  ?coverage :losesAfter36Months true.
  ?coverage :coversTransplantDrugTherapy true.
  ?coverage :otherHealthCoverage false.
} => {
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :providesBenefit true.
}.

# Rule 8: The benefit only covers immunosuppressive drugs and no other services.
{
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :providesBenefit true.
} => {
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :coversImmunosuppressiveDrugs true.
}.

# Rule 9: It is not a substitute for full health coverage.
{
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :providesBenefit true.
} => {
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :substituteForFullCoverage false.
}.

# Rule 10: The benefit can be applied for any time after Part A coverage ends.
{
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :providesBenefit true.
  ?coverage :canApplyAfterPartAEnds true.
} => {
  ?person :hasMedicareCoverage ?coverage.
}.

# Rule 11: To sign up for the benefit, contact Social Security at 1-877-465-0355. TTY users can call 1-800-325-0788.
{
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :providesBenefit true.
} => {
  ?person :canSignUpBenefit true.
}.

# Final decision
{
  ?person :hasMedicareCoverage ?coverage.
  ?coverage :providesBenefit true.
  ?coverage :coversImmunosuppressiveDrugs true.
  ?coverage :losesPartACoverage true.
  ?coverage :losesAfter36Months true.
  ?coverage :otherHealthCoverage false.
} => {
  ?person :isEligibleForBenefit true.
}.

{
  ?person :isEligibleForBenefit true.
  ?person :canSignUpBenefit true.
  ?person :hasContactInformation ?contact.
  ?contact :phoneNumber "1-877-465-0355".
} => {
  ?person :canContactSocialSecurity true.
}.

{
  ?person :isEligibleForBenefit true.
  ?person :canSignUpBenefit true.
  ?contact :phoneNumber "1-800-325-0788".
  ?contact :canUseTTY true.
} => {
  ?person :canContactSocialSecurity true.
}.

{
  ?person :isEligibleForBenefit true.
  ?person :canContactSocialSecurity true.
} => {
  ?person :canReceiveBenefit true.
}.

{
  ?person :canReceiveBenefit true.
} => {
  ?person :finalDecision true.
}.